
# ADR â€” Phase 4 (Learning & Commerce)

## Decision
- Introduced `courses-service` for course manifests, device-bound licenses, and certificates QR/metadata.
- Introduced `kpis-service` for coach KPIs.
- Introduced `affiliate-service` for referral metrics and leaderboard.
- Mobile app gains Course Player (offline/DRM-lite), Certificate QR viewer, VIP & Affiliate UI, and Coach KPIs.

## Security
- License tokens are HMAC-SHA256 signed with server secret and deviceId; player uses token as decryption key (demo XOR).
- In production, replace with chunk-level AES-GCM + license short TTL + attestation.

## Observability & Ops
- All new services expose health/ready probes and default Prometheus metrics.
- Add Helm env keys for gateway routing.
